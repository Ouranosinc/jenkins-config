plugins:
  sites:
  - id: "default"
    url: "https://updates.jenkins.io/update-center.json"
jenkins:
  agentProtocols:
  - "JNLP4-connect"
  - "Ping"
  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: true
  crumbIssuer:
    standard:
      excludeClientIPFromCrumb: false
  disableRememberMe: false
  mode: NORMAL
  nodes:
  - permanent:
      labelString: "linux docker"
      launcher:
        sSHLauncher:
          credentialsId: "id_rsa_jenkins"
          host: "slave"
          launchTimeoutSeconds: 210
          maxNumRetries: 10
          port: 22
          retryWaitTime: 15
          sshHostKeyVerificationStrategy:
            manuallyTrustedKeyVerificationStrategy:
              requireInitialManualTrust: false
      name: "linux1"
      mode: NORMAL
      numExecutors: ${NUM_EXECUTORS}  # Env var
      remoteFS: "/home/jenkins/agent"
  numExecutors: 0
  primaryView:
    all:
      name: "all"
  quietPeriod: 5
  scmCheckoutRetryCount: 0
  securityRealm:
    local:
      allowsSignup: true
      enableCaptcha: false
      users:
      - id: "admin"
        password: ${ADMIN_PASSWD}  # Env var
  slaveAgentPort: 50000
  views:
  - all:
      name: "all"
credentials:
  system:
    domainCredentials:
    - credentials:
      - basicSSHUserPrivateKey:
          description: "private id_rsa_jenkins to connect to worker"
          id: "id_rsa_jenkins"
          privateKeySource:
            directEntry:
              privateKey: ${SSH_PRIVATE_KEY}  # Load from Environment Variable
          scope: SYSTEM
          username: "jenkins"
      - usernamePassword:
          description: "ESGF authentication username password"
          id: "esgf_auth"
          password: ${ESGF_AUTH_PASSWORD}
          scope: GLOBAL
          username: ${ESGF_AUTH_USERNAME}
      - string:
          description: "ESGF authentication token"
          id: "esgf_auth_token"
          scope: GLOBAL
          secret: ${ESGF_AUTH_TOKEN}
security:
  remotingCLI:
    enabled: false
unclassified:
  location:
    adminAddress: "Jenkins <noreply@ouranos.ca>"  # from field for mail from Jenkins
    url: "${HTTP_PROTO}://${HOSTNAME}:${HOSTPORT}/"  # Env var
  extendedEmailPublisher:
    allowUnregisteredEnabled: true
tool:
  git:
    installations:
    - home: "git"
      name: "Default"
  jdk:
    defaultProperties:
    - installSource:
        installers:
        - jdkInstaller:
            acceptLicense: false

# vi: tabstop=8 expandtab shiftwidth=2 softtabstop=2
